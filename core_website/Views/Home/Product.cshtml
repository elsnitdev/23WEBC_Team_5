@{
    ViewData["ActivePage"] = "Product";
}
@model List<SanPham>
<div class="product-model">
    <div class="container">
        @await Html.PartialAsync("_Breadcrumb")
        <h2>Our Products</h2>
        <div class="col-md-9 product-model-sec" id="product-list">
        </div>
        @await Html.PartialAsync("_Sidebar")
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        function loadProducts() {
            fetch('/Home/GetProductList', {
                method: 'GET',
                headers: {
                    'Accept': 'text/html'
                }
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                return response.text();
            })
            .then(html => {
                document.getElementById('product-list').innerHTML = html;
            })
            .catch(error => {
                console.error('Error fetching products:', error);
                document.getElementById('product-list').innerHTML = '<p>Error loading products.</p>';
            });
        }

        // Call loadProducts immediately to fetch and render products on page load
        loadProducts();
    });
</script>